<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Practice | ExamBuddy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <style>
    .practice-box {
      background: white;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    .options label {
      display: block;
      padding: 10px;
      margin-bottom: 8px;
      background: #f1f5ff;
      border-radius: 8px;
      cursor: pointer;
    }

    .options input { margin-right: 8px; }

    .result {
      margin-top: 15px;
      font-weight: bold;
    }

    .explanation {
      margin-top: 10px;
      padding: 12px;
      background: #eef2ff;
      border-radius: 8px;
      display: none;
    }

    .btn {
      display: inline-block;
      padding: 10px 20px;
      background: #4f46e5;
      color: white;
      border-radius: 30px;
      font-weight: bold;
      text-decoration: none;
      margin-top: 10px;
      margin-right: 10px;
    }
  </style>
</head>
<body>

  <header class="navbar">
    <h1 class="logo">ExamBuddy üìò</h1>
    <nav>
      <a href="subjects.html">Back</a>
    </nav>
  </header>

  <div class="practice-box">
    <h2 id="subject-title">Practice ‚úèÔ∏è</h2>

    <div id="question-container"></div>

    <button class="btn" id="prev-btn">Previous Question</button>
    <button class="btn" id="next-btn">Next Question</button>

    <div id="result" class="result"></div>
    <div id="explanation" class="explanation"></div>
  </div>

  <script>
    // Question pools
    const mathQuestions = [
      {q:"Simplify: 2x + 5x", options:["7x","10x","5x","7"], answer:"7x", explanation:"2+5=7 ‚Üí 7x"},
      {q:"If x=3, what is 4x+2?", options:["14","12","11","10"], answer:"14", explanation:"4*3+2=14"},
      {q:"What is the square of 5?", options:["10","15","20","25"], answer:"25", explanation:"5*5=25"},
      {q:"Simplify: 3(a+2)", options:["3a+2","3a+6","a+5","5a+6"], answer:"3a+6", explanation:"Distribute 3 ‚Üí 3a+6"},
      {q:"What is 15 √∑ 3?", options:["3","4","5","6"], answer:"5", explanation:"15√∑3=5"},
      {q:"Simplify: 6y - 2y", options:["4y","8y","6y","2y"], answer:"4y", explanation:"6-2=4 ‚Üí 4y"},
      {q:"If x=2, compute x^2 + 3", options:["5","7","8","9"], answer:"7", explanation:"2^2 +3=7"},
      {q:"What is 12 √ó 3?", options:["36","24","30","32"], answer:"36", explanation:"12*3=36"},
      {q:"Simplify: 5(a+4)", options:["5a+4","5a+20","a+9","20a"], answer:"5a+20", explanation:"Distribute 5 ‚Üí 5a+20"},
      {q:"What is 9 √∑ 3?", options:["2","3","4","5"], answer:"3", explanation:"9√∑3=3"}
    ];

    const physicsQuestions = [
      {q:"What is the SI unit of force?", options:["Newton","Joule","Watt","Pascal"], answer:"Newton", explanation:"Force = mass √ó acceleration, unit is Newton (N)"},
      {q:"What is the acceleration due to gravity on Earth?", options:["9.8 m/s¬≤","10 m/s¬≤","9.8 km/s¬≤","8 m/s¬≤"], answer:"9.8 m/s¬≤", explanation:"Standard gravity g ‚âà 9.8 m/s¬≤"},
      {q:"Which device is used to measure current?", options:["Voltmeter","Ammeter","Ohmmeter","Galvanometer"], answer:"Ammeter", explanation:"Ammeter measures electric current in amperes"},
      {q:"What is the speed of light in vacuum?", options:["3√ó10^8 m/s","3√ó10^6 m/s","3√ó10^5 km/s","3√ó10^7 m/s"], answer:"3√ó10^8 m/s", explanation:"Speed of light c = 3√ó10^8 meters/second"},
      {q:"Which law states F=ma?", options:["Ohm's Law","Newton's Second Law","Newton's First Law","Hooke's Law"], answer:"Newton's Second Law", explanation:"Newton's Second Law: Force = mass √ó acceleration"},
      {q:"Energy stored in a stretched spring is?", options:["Kinetic Energy","Potential Energy","Elastic Potential Energy","Mechanical Energy"], answer:"Elastic Potential Energy", explanation:"E = 1/2 k x¬≤"},
      {q:"Unit of electric charge is?", options:["Coulomb","Ampere","Volt","Ohm"], answer:"Coulomb", explanation:"Electric charge is measured in Coulombs (C)"},
      {q:"What is 1 Joule?", options:["1 N¬∑m","1 kg","1 W","1 V"], answer:"1 N¬∑m", explanation:"1 Joule = 1 Newton √ó 1 meter of displacement"},
      {q:"Which instrument measures temperature?", options:["Thermometer","Barometer","Hygrometer","Ammeter"], answer:"Thermometer", explanation:"Thermometer measures temperature in ¬∞C or K"},
      {q:"What is the formula for speed?", options:["v = d/t","v = m√óa","v = F/m","v = m/g"], answer:"v = d/t", explanation:"Speed = distance √∑ time"}
    ];

    // Shuffle function
    function shuffleArray(array) {
      for (let i=array.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [array[i],array[j]]=[array[j],array[i]];
      }
      return array;
    }

    // Get subject from URL
    const urlParams = new URLSearchParams(window.location.search);
    const subject = urlParams.get('subject') || "Math";
    document.getElementById("subject-title").textContent = subject + " Practice ‚úèÔ∏è";

    // Pick question pool based on subject
    let questionPool = [];
    if(subject === "Math"){
      questionPool = shuffleArray([...mathQuestions]).slice(0,5);
    } else if(subject === "Physics"){
      questionPool = shuffleArray([...physicsQuestions]).slice(0,5);
    }

    let currentQuestion = 0;
    let userAnswers = new Array(questionPool.length).fill(null);
    let answeredThisQuestion = false;

    const container = document.getElementById("question-container");
    const nextBtn = document.getElementById("next-btn");
    const prevBtn = document.getElementById("prev-btn");
    const resultDiv = document.getElementById("result");
    const explanationDiv = document.getElementById("explanation");

    function showQuestion() {
      const q = questionPool[currentQuestion];
      const optionsShuffled = shuffleArray([...q.options]);

      let html = `<p><strong>Question ${currentQuestion+1}:</strong> ${q.q}</p>`;
      html += '<div class="options">';
      for (let i=0;i<optionsShuffled.length;i++){
        const checked = userAnswers[currentQuestion]===optionsShuffled[i] ? "checked":"";
        html += `<label><input type="radio" name="answer" value="${optionsShuffled[i]}" ${checked}> ${optionsShuffled[i]}</label>`;
      }
      html += '</div>';

      container.innerHTML = html;
      resultDiv.textContent = "";
      explanationDiv.style.display = "none";
      explanationDiv.textContent = "";
      answeredThisQuestion = false;

      prevBtn.style.display = currentQuestion===0?"none":"inline-block";
      nextBtn.textContent = currentQuestion===questionPool.length-1?"Finish":"Next Question";
    }

    function saveAnswer(){
      const options=document.getElementsByName("answer");
      for(let opt of options){
        if(opt.checked) userAnswers[currentQuestion]=opt.value;
      }
    }

    function checkAnswer(){
      saveAnswer();
      const selected=userAnswers[currentQuestion];
      if(!selected){
        resultDiv.textContent="Please select an answer first ‚ö†Ô∏è";
        resultDiv.style.color="orange";
        return false;
      }

      const correct=questionPool[currentQuestion].answer;
      if(selected===correct){
        resultDiv.textContent="Correct ‚úÖ";
        resultDiv.style.color="green";
      } else {
        resultDiv.textContent="Wrong ‚ùå";
        resultDiv.style.color="red";
      }

      explanationDiv.style.display="block";
      explanationDiv.innerHTML="Explanation: "+questionPool[currentQuestion].explanation;
      return true;
    }

    nextBtn.addEventListener("click", ()=>{
      if(!answeredThisQuestion){
        answeredThisQuestion = checkAnswer();
      } else {
        currentQuestion++;
        if(currentQuestion<questionPool.length){
          showQuestion();
        } else {
          // Test finished
          container.innerHTML=`<h3>üéâ Test Completed!</h3>`;
          prevBtn.style.display="none";
          nextBtn.style.display="none";

          // Calculate score
          let score=0;
          for(let i=0;i<userAnswers.length;i++){
            if(userAnswers[i]===questionPool[i].answer) score++;
          }
          resultDiv.textContent=`You got ${score}/${questionPool.length} correct üéØ`;
          explanationDiv.style.display="none";
        }
      }
    });

    prevBtn.addEventListener("click", ()=>{
      saveAnswer();
      if(currentQuestion>0){
        currentQuestion--;
        showQuestion();
      }
    });

    showQuestion();
  </script>

</body>
</html>